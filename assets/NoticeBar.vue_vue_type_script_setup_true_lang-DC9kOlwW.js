import{O as g,c as C,a1 as W,o as q,h as D,I as p,a2 as E,a3 as v,a4 as _,k as P,w as L}from"./index-Bd3nhUJ2.js";import{s as R,r as x,e as M,w as O,R as $,S as z,q as i,C as A,z as V}from"./vue-BUcO0Ml9.js";import{u as X}from"./use-expose-CJx1Pmvu.js";const[j,l]=C("notice-bar"),F={text:String,mode:String,color:String,delay:g(1),speed:g(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var G=R({name:j,props:F,emits:["close","replay"],setup(e,{emit:f,slots:a}){let r=0,o=0,h;const d=x(),m=x(),t=M({show:!0,offset:0,duration:0}),k=()=>{if(a["left-icon"])return a["left-icon"]();if(e.leftIcon)return i(p,{class:l("left-icon"),name:e.leftIcon},null)},I=()=>{if(e.mode==="closeable")return"cross";if(e.mode==="link")return"arrow"},y=n=>{e.mode==="closeable"&&(t.show=!1,f("close",n))},B=()=>{if(a["right-icon"])return a["right-icon"]();const n=I();if(n)return i(p,{name:n,class:l("right-icon"),onClick:y},null)},S=()=>{t.offset=r,t.duration=0,E(()=>{v(()=>{t.offset=-o,t.duration=(o+r)/+e.speed,f("replay")})})},N=()=>{const n=e.scrollable===!1&&!e.wrapable,c={transform:t.offset?"translateX(".concat(t.offset,"px)"):"",transitionDuration:"".concat(t.duration,"s")};return i("div",{ref:d,role:"marquee",class:l("wrap")},[i("div",{ref:m,style:c,class:[l("content"),{"van-ellipsis":n}],onTransitionend:S},[a.default?a.default():e.text])])},s=()=>{const{delay:n,speed:c,scrollable:u}=e,T=P(n)?+n*1e3:0;r=0,o=0,t.offset=0,t.duration=0,clearTimeout(h),h=setTimeout(()=>{if(!d.value||!m.value||u===!1)return;const w=_(d).width,b=_(m).width;(u||b>w)&&v(()=>{r=w,o=b,t.offset=-o,t.duration=o/+c})},T)};return W(s),q(s),D("pageshow",s),X({reset:s}),O(()=>[e.text,e.scrollable],s),()=>{const{color:n,wrapable:c,background:u}=e;return $(i("div",{role:"alert",class:l({wrapable:c}),style:{color:n,background:u}},[k(),N(),B()]),[[z,t.show]])}}});const H=L(G),U=R({__name:"NoticeBar",props:{text:{}},setup(e){const f=e;return(a,r)=>{const o=H;return V(),A(o,{color:"var(--mobvue-primary-color)",background:"#ecf9ff","left-icon":"bulb-o",text:f.text},null,8,["text"])}}});export{U as _};
