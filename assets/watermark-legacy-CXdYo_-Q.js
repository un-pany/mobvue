System.register(["./index-legacy-s3a0iz0g.js","./index-legacy-B_VrXmhD.js","./vue-legacy-DqqM7FCT.js","./NoticeBar.vue_vue_type_script_setup_true_lang-legacy-Ba7SEcS2.js","./use-expose-legacy-CCk45JcI.js"],(function(e,t){"use strict";var r,n,a,i,l,o,s,u,c,v,d,f,h,p,m;return{setters:[e=>{r=e.J,n=e.K,a=e.M},e=>{i=e.B},e=>{l=e.r,o=e.y,s=e.g,u=e.B,c=e.m,v=e.N,d=e.I,f=e.v,h=e.C,p=e.K},e=>{m=e._},null],execute:function(){var t=/\s/,y=/^\s+/;function b(e){return e?e.slice(0,function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}(e)+1).replace(y,""):e}var g=/^[-+]0x[0-9a-f]+$/i,w=/^0b[01]+$/i,x=/^0o[0-7]+$/i,k=parseInt;function E(e){if("number"==typeof e)return e;if(r(e))return NaN;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=b(e);var a=w.test(e);return a||x.test(e)?k(e.slice(2),a?2:8):g.test(e)?NaN:+e}var O=function(){return a.Date.now()},M=Math.max,z=Math.min;function _(e,t,r){var a,i,l,o,s,u,c=0,v=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var r=a,n=i;return a=i=void 0,c=t,o=e.apply(n,r)}function p(e){var r=e-u;return void 0===u||r>=t||r<0||d&&e-c>=l}function m(){var e=O();if(p(e))return y(e);s=setTimeout(m,function(e){var r=t-(e-u);return d?z(r,l-(e-c)):r}(e))}function y(e){return s=void 0,f&&a?h(e):(a=i=void 0,o)}function b(){var e=O(),r=p(e);if(a=arguments,i=this,u=e,r){if(void 0===s)return function(e){return c=e,s=setTimeout(m,t),v?h(e):o}(u);if(d)return clearTimeout(s),s=setTimeout(m,t),h(u)}return void 0===s&&(s=setTimeout(m,t)),o}return t=E(t)||0,n(r)&&(v=!!r.leading,l=(d="maxWait"in r)?M(E(r.maxWait)||0,t):l,f="trailing"in r?!!r.trailing:f),b.cancel=function(){void 0!==s&&clearTimeout(s),c=0,a=u=i=s=void 0},b.flush=function(){return void 0===s?o:y(O())},b}const C={defense:!0,color:"#c0c4cc",opacity:.5,size:16,family:"serif",angle:-20,width:300,height:200},W=l(document.body);function N(e=W){let t,r,n=null;const a={watermarkElMutationObserver:void 0,parentElMutationObserver:void 0,parentElResizeObserver:void 0},i=()=>{const t=e.value.tagName.toLowerCase()===W.value.tagName.toLowerCase(),r=t?"fixed":"absolute",a=t?"":"relative";n=document.createElement("div"),n.style.pointerEvents="none",n.style.top="0",n.style.left="0",n.style.position=r,n.style.zIndex="99999";const{clientWidth:i,clientHeight:o}=e.value;l({width:i,height:o}),e.value.style.position=a,e.value.appendChild(n)},l=(e={})=>{n&&(t&&(n.style.background=`url(${s()}) left top repeat`),e.width&&(n.style.width=`${e.width}px`),e.height&&(n.style.height=`${e.height}px`))},s=()=>{const{color:e,opacity:n,size:a,family:i,angle:l,width:o,height:s}=r,u=document.createElement("canvas");u.width=o,u.height=s;const c=u.getContext("2d");return c&&(c.fillStyle=e,c.globalAlpha=n,c.font=`${a}px ${i}`,c.rotate(Math.PI/180*l),c.fillText(t,0,s/2)),u.toDataURL()},u=()=>{if(e.value&&n){d();try{e.value.removeChild(n)}catch{console.warn("水印元素已不存在，请重新创建")}finally{n=null}}},c=_((()=>{u(),i(),v(e.value)}),100),v=e=>{r.defense?a.watermarkElMutationObserver||a.parentElMutationObserver||f(e):d("mutation"),a.parentElResizeObserver||h(e)},d=(e="all")=>{"mutation"!==e&&"all"!==e||(a.watermarkElMutationObserver?.disconnect(),a.watermarkElMutationObserver=void 0,a.parentElMutationObserver?.disconnect(),a.parentElMutationObserver=void 0),"resize"!==e&&"all"!==e||(a.parentElResizeObserver?.disconnect(),a.parentElResizeObserver=void 0)},f=e=>{const t=_((t=>{t.forEach(_((t=>{switch(t.type){case"attributes":t.target===n&&c();break;case"childList":t.removedNodes.forEach((t=>{t===n&&e.appendChild(n)}))}}),100))}),100);a.watermarkElMutationObserver=new MutationObserver(t),a.parentElMutationObserver=new MutationObserver(t),a.watermarkElMutationObserver.observe(n,{attributes:!0,childList:!1,subtree:!1}),a.parentElMutationObserver.observe(e,{attributes:!1,childList:!0,subtree:!1})},h=e=>{const t=_((()=>{const{clientWidth:t,clientHeight:r}=e;l({width:t,height:r})}),500);a.parentElResizeObserver=new ResizeObserver(t),a.parentElResizeObserver.observe(e)};return o((()=>{u()})),{setWatermark:(a,o={})=>{if(!e.value)return console.warn("请在 DOM 挂载完成后再调用 setWatermark 方法设置水印");t=a,r={...C,...o},n?l():i(),v(e.value)},clearWatermark:u}}const R={"un-mb-20px":""},T={"un-mt-40px":"","un-flex-x-center":""},$={"un-mt-20px":"","un-flex-x-center":""};e("default",s({__name:"watermark",setup(e){const t=l(null),{setWatermark:r,clearWatermark:n}=N(t),{setWatermark:a,clearWatermark:o}=N();return(e,l)=>{const s=i;return h(),u("div",R,[c(m,{text:"支持局部、全局、自定义样式，并自带防御和自适应功能"}),v("div",{ref_key:"localRef",ref:t,class:"local","un-mt-40px":"","un-h-35vh":"","un-b-2px":"","un-b-dashed":"","un-b-primary":""},null,512),v("div",T,[c(s,{type:"primary",size:"small",square:"",onClick:l[0]||(l[0]=e=>f(r)("局部水印",{color:"#409eff",width:200,height:150}))},{default:d((()=>l[4]||(l[4]=[p(" 创建局部水印 ")]))),_:1}),c(s,{type:"warning",size:"small",square:"",onClick:l[1]||(l[1]=e=>f(r)("没有防御功能的局部水印",{color:"#e6a23c",defense:!1,width:200,height:150}))},{default:d((()=>l[5]||(l[5]=[p(" 创建无防御局部水印 ")]))),_:1}),c(s,{type:"danger",size:"small",square:"",onClick:f(n)},{default:d((()=>l[6]||(l[6]=[p(" 清除局部水印 ")]))),_:1},8,["onClick"])]),v("div",$,[c(s,{type:"primary",size:"small",square:"",onClick:l[2]||(l[2]=e=>f(a)("全局水印",{color:"#409eff",width:200,height:150}))},{default:d((()=>l[7]||(l[7]=[p(" 创建全局水印 ")]))),_:1}),c(s,{type:"warning",size:"small",square:"",onClick:l[3]||(l[3]=e=>f(a)("没有防御功能的全局水印",{color:"#e6a23c",defense:!1,width:200,height:150}))},{default:d((()=>l[8]||(l[8]=[p(" 创建无防御全局水印 ")]))),_:1}),c(s,{type:"danger",size:"small",square:"",onClick:f(o)},{default:d((()=>l[9]||(l[9]=[p(" 清除全局水印 ")]))),_:1},8,["onClick"])])])}}}))}}}));
