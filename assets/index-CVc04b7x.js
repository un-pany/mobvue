import{t as x,n as T,c as k,u as C,F as A,p as N,w as q,r as z,a as I}from"./index-DR4nFk1V.js";import{B as M}from"./index-CxLozANN.js";import{C as U}from"./index-150bU4n6.js";import{F as D}from"./index-BodR7LnL.js";import{_ as K}from"./Description.vue_vue_type_script_setup_true_lang-Px9Grj2H.js";import{g as y,m as i,r as O,n as R,B as $,I as B,C as j,N as G,v as c,K as H,H as W}from"./vue-BMmLX8t2.js";import{u as Y}from"./use-expose-CnYjB8Ji.js";import"./use-id-CYE_-0Mg.js";const[J,L]=k("form"),Q={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:T,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:x,showErrorMessage:x,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var X=y({name:J,props:Q,emits:["submit","failed"],setup(u,{emit:f,slots:p}){const{children:s,linkChildren:a}=C(A),m=e=>e?s.filter(t=>e.includes(t.name)):s,g=e=>new Promise((t,o)=>{const n=[];m(e).reduce((F,P)=>F.then(()=>{if(!n.length)return P.validate().then(S=>{S&&n.push(S)})}),Promise.resolve()).then(()=>{n.length?o(n):t()})}),l=e=>new Promise((t,o)=>{const n=m(e);Promise.all(n.map(r=>r.validate())).then(r=>{r=r.filter(Boolean),r.length?o(r):t()})}),v=e=>{const t=s.find(o=>o.name===e);return t?new Promise((o,n)=>{t.validate().then(r=>{r?n(r):o()})}):Promise.reject()},_=e=>typeof e=="string"?v(e):u.validateFirst?g(e):l(e),h=e=>{typeof e=="string"&&(e=[e]),m(e).forEach(o=>{o.resetValidation()})},b=()=>s.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),d=(e,t)=>{s.some(o=>o.name===e?(o.$el.scrollIntoView(t),!0):!1)},V=()=>s.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),w=()=>{const e=V();_().then(()=>f("submit",e)).catch(t=>{f("failed",{values:e,errors:t});const{scrollToError:o,scrollToErrorPosition:n}=u;o&&t[0].name&&d(t[0].name,n?{block:n}:void 0)})},E=e=>{N(e),w()};return a({props:u}),Y({submit:w,validate:_,getValues:V,scrollToField:d,resetValidation:h,getValidationStatus:b}),()=>{var e;return i("form",{class:L(),onSubmit:E},[(e=p.default)==null?void 0:e.call(p)])}}});const Z=q(X);function ee(u){return z({url:"auth/login",method:"post",data:u})}const te={"un-h-full":"","un-flex-center":"","un-flex-col":"","un-select-none":""},oe={"un-mx-16px":"","un-my-32px":""},me=y({__name:"index",setup(u){const f=W(),p=I(),s=O(!1),a=R({username:"admin",password:"12345678"});function m(){s.value=!0,ee(a).then(({data:g})=>{p.setToken(g.token),f.push("/")}).catch(()=>{a.password=""}).finally(()=>{s.value=!1})}return(g,l)=>{const v=D,_=U,h=M,b=Z;return j(),$("div",te,[i(K,{"un-mb-20px":""}),i(b,{onSubmit:m},{default:B(()=>[i(_,{inset:""},{default:B(()=>[i(v,{modelValue:c(a).username,"onUpdate:modelValue":l[0]||(l[0]=d=>c(a).username=d),name:"username",label:"用户名",size:"large",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),i(v,{modelValue:c(a).password,"onUpdate:modelValue":l[1]||(l[1]=d=>c(a).password=d),type:"password",name:"password",label:"密码",size:"large",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])]),_:1}),G("div",oe,[i(h,{loading:c(s),type:"primary","native-type":"submit",size:"large",round:"",block:""},{default:B(()=>l[2]||(l[2]=[H(" 登 录 ")])),_:1},8,["loading"])])]),_:1})])}}});export{me as default};
